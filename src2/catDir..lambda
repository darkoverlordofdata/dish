##
##
## cat primitives.lambda catDir.lambda | node lambda.js

catDir = lambda(dirname) {
  forEach(readDir(dirname), lambda(f){
    if !stringStartsWith(f, ".") {
      let (fullname = pathJoin(dirname, f),
           stat = fstat(fullname)) {
        if isDirectory(stat) {
          catDir(fullname);
        } else if isFile(stat) {
          print(readFile(fullname));
        }
      }
    }
  });
};

catDir("/home/bruce/emscripten/c-ish/");
import fred;
